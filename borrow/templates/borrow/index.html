{% extends "base.html" %}
{% block title %}Borrow System{% endblock %}
{% block scripts %}
  {% load static %}
  <script src="{% static 'js/carousel.js' %}" defer></script>
{% endblock %}
{% block content %}
<main class="grid md:grid-flow-col grid-cols-5 gap-x-5 px-5 max-w-[1200px] mx-auto">
  <!-- search form -->
  <form action="" class="col-span-6 md:col-span-2 grid grid-flow-row gap-y-2 shadow-lg rounded-lg p-5">
    {% csrf_token %}
    <div class="flex flex-col">
      <label for="search_name">Search name</label>
      <input type="text" name="search_name" id="search_name" autofocus
      class="px-2 py-1 outline outline-1 outline-red-400 rounded hover:outline-2 focus:outline-2"/>
    </div>
    <div class="flex flex-col">
      <label for="search_year">Search year</label>
      <input type="text" name="search_year" id="search_year"
      class="px-2 py-1 outline outline-1 outline-red-400 rounded hover:outline-2 focus:outline-2"/>
    </div>
    <div class="flex flex-col">
      <label for="search_author">Search author</label>
      <input type="text" name="search_author" id="search_author"
      class="px-2 py-1 outline outline-1 outline-red-400 rounded hover:outline-2 focus:outline-2"/>
    </div>
    <div class="flex gap-x-2">
      <label for="category_books" class="select-none">Books</label>
      <input type="checkbox" name="category_books" id="category_books" value="search_books"/>
      <label for="category_music" class="select-none">Music</label>
      <input type="checkbox" name="category_music" id="category_music" value="search_music"/>
      <label for="category_movies" class="select-none">Movies</label>
      <input type="checkbox" name="category_movies" id="category_movies" value="search_movies"/>
    </div>
    <button type="submit" class="bg-red-400 text-neutral-100 font-semibold w-20 px-4 py-2 rounded
      transition-all hover:text-neutral-900 active:brightness-75">Search</button>
  </form>
  <!-- user guide -->
  <div class="col-span-5 flex flex-col justify-center md:col-span-3">
    <div>
      <h2 class="text-lg text-center font-semibold">Guide</h2>
      <p>
        Lorem ipsum dolor sit, amet consectetur adipisicing elit. 
        Labore assumenda beatae inventore ratione expedita eum atque aspernatur 
        cum animi laborum, culpa dolorum quasi fuga minus tempora officiis! Tempora, deleniti sit.
      </p>
    </div>
  </div>
</main>

<!-- most recent additions -->
<section class="max-w-[1200px] mx-auto mt-10 px-5">
  <h3 class="font-semibold mb-2">Recent additions</h3>
  <div class="carousel grid grid-flow-col text-center pb-6 overflow-auto gap-x-4">
    {% for listing in listings %}
    <a href="{% url 'borrow:product' listing.id %}" draggable="false"
      class="select-none shadow-md w-[200px] aspect-square group hover:shadow-lg">
      <div class="overflow-hidden aspect-square relative group">
        {% if listing.thumbnail %}
        <!-- if listing has a thumbnail -->
        <img src="{{ listing.thumbnail }}" alt="{{ listing.title }} -thumbnail" 
          width="300" height="300" draggable="false"
          class="object-cover w-full h-full transition-all group-hover:scale-110">
        {% else %}
        <!-- if listing doesn't have a thumbnail -->
        {% load static %}
        <div class="object-cover w-full h-full flex flex-col justify-center bg-neutral-200
          opacity-50 transition-all hover:scale-110">
          <img src="{% static 'icons/default-' %}{{ listing.category }}.svg" alt="{{ listing.title }} -thumbnail" 
            width="300" height="300" draggable="false"
            class="w-full h-1/4"/>
          <p class="font-semibold">Image not provided</p>
        </div>
        {% endif %}
        <!-- listing genre -->
        <p class="absolute bottom-0 right-1/2 translate-x-1/2 py-2 bg-[#40404055] w-full text-neutral-100 truncate
          opacity-0 transition-all group-hover:opacity-100">{{ listing.genre|title }}</p>
      </div>
      <!-- listing title -->
      <p class="text-sm line-clamp-2 py-2 px-3 text-start h-2/6 flex items-center
        transition-all group-hover:underline">{{ listing.name }}</p>
    </a>
    {% endfor %}
  </div>
</section>
{% endblock %}
